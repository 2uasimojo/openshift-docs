[[install-config-configuring-kuryr-sdn]]
= Configuring Kuryr SDN
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:

toc::[]

[[kuryr-sdn-and-openshift]]
== Kuryr SDN and {product-title}


link:https://docs.openstack.org/kuryr-kubernetes/latest/[Kuryr] (or more
specifically Kuryr-Kubernetes) is an SDN solution built using
link:https://github.com/containernetworking/cni[CNI] and
link:https://docs.openstack.org/neutron/latest/[OpenStack Neutron]. Its
advantages include being able to use a wide range of Neutron SDN backends and
providing inter-connectivity between Kubernetes pods and OpenStack virtual
machines (VMs).

Kuryr-Kubernetes and {product-title} integration is primarily designed for
{product-title} clusters running on OpenStack VMs. Kuryr-Kubernetes components
are installed as pods on {product-title} in the `kuryr` namespace:

* kuryr-controller - a single service instance, installed on an `infra` node.
Modeled in {product-title} as a `Deployment`.
* kuryr-cni - container installing and configuring Kuryr as CNI driver on each
  {product-title} node. Modeled in {product-title} as a `DaemonSet`.


The Kuryr controller watches the OpenShift API server for pod, service, and
namespace create, update, and delete events. It maps the {product-title} API calls to
corresponding objects in Neutron and Octavia. This means that every network
solution that implements the Neutron trunk port functionality can be used to
back {product-title} via Kuryr. This includes open source solutions such as OVS and
OVN as well as Neutron-compatible commercial SDNs.


[[kuryr-sdn-installation]]
== Installing Kuryr SDN

For the Kuryr SDN installation on an OpenStack cloud, you must follow the steps
described in the
xref:configuring_openstack.adoc#install-config-configuring-openstack[OpenStack configuration documentation].

[[kuryr-sdn-verification]]
== Verification

Once the installation of {product-title} is finished, you can check if Kuryr
pods are deployed successfully:

----
$ oc -n kuryr get pods -o wide
NAME                                READY     STATUS    RESTARTS   AGE       IP              NODE
kuryr-cni-ds-66kt2                  2/2       Running   0          3d        192.168.99.14   infra-node-0.openshift.example.com
kuryr-cni-ds-ggcpz                  2/2       Running   0          3d        192.168.99.16   master-0.openshift.example.com
kuryr-cni-ds-mhzjt                  2/2       Running   0          3d        192.168.99.6    app-node-1.openshift.example.com
kuryr-cni-ds-njctb                  2/2       Running   0          3d        192.168.99.12   app-node-0.openshift.example.com
kuryr-cni-ds-v8hp8                  2/2       Running   0          3d        192.168.99.5    infra-node-1.openshift.example.com
kuryr-controller-59fc7f478b-qwk4k   1/1       Running   0          3d        192.168.99.5    infra-node-1.openshift.example.com
----

kuryr-cni pods run on every {product-title} node. Single
kuryr-controller instances run on any of the `infra` nodes.

[NOTE]
====
Network policies and nodeport services are not supported when Kuryr SDN is
enabled.
====
